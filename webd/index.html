<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://webfontworld.github.io/gmarket/GmarketSans.css" rel="stylesheet">
    <link href="https://websfont.github.io/nanumSquareNeo/nanumSquareNeo.css" rel="stylesheet">
    <link href="https://webfontworld.github.io/crown/CrownMychew.css" rel="stylesheet">
</head>
<style>
    * {
        margin: 0;
        padding: 0;
        font-family: "CrownMychew";
        box-sizing: border-box;
    }

    a {
        color: #000;
        text-decoration: none;
    }

    li {
        list-style: none;
    }

    body {
        width: 100%;
        height: 100vh;
        overflow: hidden;
    }

    main {
        width: 100%;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        border: 8px solid #270b0b;
        border-radius: 20px;
        position: absolute;
        left: 0;
        top: 0;
        z-index: 1000;
    }

    main::before {
        content: "";
        border: 8px solid #270b0b;
        width: calc(100% - 16px);
        height: calc(100% - 16px);
        position: absolute;
        left: 0;
        top: 0;
        border-radius: 12px;
        z-index: -1;
    }

    main h1 {
        font-size: 5vw;
        margin-bottom: 3vw;
        margin-top: 1vw;
    }

    main h1 a {
        font-size: 10vw;
        color: #e080e0;
    }

    main nav {
        margin-bottom: 5vw;
    }

    main nav ul {
        display: flex;
    }

    main nav ul li a {
        display: inline-block;
        font-size: 25px;
        font-family: "CrownMychew";
        border: 1px dashed #272929;
        padding: 10px 20px;
        margin: 2px;
        color: #e080e0;
        transition: all 0.3s;

    }

    main nav ul li a:hover {
        border: 1px solid #bc70d3;
        border: 1px solid #c48daf;
        background-color: #f0ecf1;

    }
</style>

<body>
    <canvas id="canvas"></canvas>
    <main>
        <h1>
            <a href="index.html">Webd</a>
        </h1>

        <nav>
            <ul>
                <li><a href="cate.html">Layout</a></li>
                <li><a href="cate.html">Menu</a></li>
                <li><a href="cate.html">Slider</a></li>
                <li><a href="cate.html">Site</a></li>
            </ul>
        </nav>
        <!-- <nav>
        <ul>
            <li><a href="layoutA-1.html">A-1</a></li>
            <li><a href="layoutA-2.html">A-2</a></li>
            <li><a href="layoutA-3.html">A-3</a></li>
            <li><a href="layoutA-4.html">A-4</a></li>

            <li><a href="layoutB-1.html">B-1</a></li>
            <li><a href="layoutB-2.html">B-2</a></li>
            <li><a href="layoutB-3.html">B-3</a></li>
            <li><a href="layoutB-4.html">B-4</a></li>

            <li><a href="layoutC-1.html">C-1</a></li>
            <li><a href="layoutC-2.html">C-2</a></li>
            <li><a href="layoutC-3.html">C-3</a></li>
            <li><a href="layoutC-4.html">C-4</a></li>

            <li><a href="layoutD-1.html">D-1</a></li>
            <li><a href="layoutD-2.html">D-2</a></li>
            <li><a href="layoutD-3.html">D-3</a></li>
            <li><a href="layoutD-4.html">D-4</a></li>

            <li><a href="layoutE-1.html">E-1</a></li>
            <li><a href="layoutE-2.html">E-2</a></li>
            <li><a href="layoutE-3.html">E-3</a></li>
            <li><a href="layoutE-4.html">E-4</a></li>

            <li><a href="layoutF-1.html">F-1</a></li>
            <li><a href="layoutF-2.html">F-2</a></li>
            <li><a href="layoutF-3.html">F-3</a></li>
            <li><a href="layoutF-4.html">F-4</a></li>
        </ul>
        <ul>
            <li><a href="menu-1.html">M-1</a></li>
            <li><a href="menu-2.html">M-2</a></li>
            <li><a href="menu-3.html">M-3</a></li>
            <li><a href="menu-4.html">M-4</a></li>
            <li><a href="menu-5.html">M-5</a></li>
            <li><a href="menu-6.html">M-6</a></li>
        </ul>
        <ul>
            <li><a href="slider-1.html">S-1</a></li>
            <li><a href="slider-2.html">S-2</a></li>
            <li><a href="slider-3.html">S-3</a></li>
            <li><a href="slider-4.html">S-4</a></li>
            <li><a href="slider-5.html">S-5</a></li>
            <li><a href="slider-6.html">S-6</a></li>
        </ul>
        <ul>
            <li><a href="tab.html">T-1</a></li>
            <li><a href="popup.html">P-2</a></li>
        </ul>
        <ul>
            <li><a href="site1.html">SITE1</a></li>
            <li><a href="site2.html">SITE2</a></li>
            <li><a href="site3.html">SITE3</a></li>
            <li><a href="site4.html">SITE4</a></li>
            <li><a href="site5.html">SITE5</a></li>
            <li><a href="site6.html">SITE6</a></li>
        </ul>
        </nav> -->

    </main>
    <script>
        var canvas = document.getElementById("canvas");

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        var gl = canvas.getContext('webgl');
        var time = 0.0;

        var vertexSource = `
            attribute vec2 position;
            void main() {
                gl_Position = vec4(position, 0.0, 1.0);
            }
        `;

        var fragmentSource = `
            precision highp float;

            uniform float width;
            uniform float height;
            vec2 resolution = vec2(width, height);
            uniform float time;

            #define POINT_COUNT 8
            vec2 points[POINT_COUNT];
            const float speed = -0.1;
            const float len = 0.5;
            float intensity = 1.5;
            float radius = 0.008;

            float sdBezier(vec2 pos, vec2 A, vec2 B, vec2 C){    
                vec2 a = B - A;
                vec2 b = A - 2.0*B + C;
                vec2 c = a * 2.0;
                vec2 d = A - pos;

                float kk = 1.0 / dot(b,b);
                float kx = kk * dot(a,b);
                float ky = kk * (2.0*dot(a,a)+dot(d,b)) / 3.0;
                float kz = kk * dot(d,a);      
                float res = 0.0;
                float p = ky - kx*kx;
                float p3 = p*p*p;
                float q = kx*(2.0*kx*kx - 3.0*ky) + kz;
                float h = q*q + 4.0*p3;

                if(h >= 0.0){ 
                    h = sqrt(h);
                    vec2 x = (vec2(h, -h) - q) / 2.0;
                    vec2 uv = sign(x)*pow(abs(x), vec2(1.0/3.0));
                    float t = uv.x + uv.y - kx;
                    t = clamp( t, 0.0, 1.0 );

                    // 1 root
                    vec2 qos = d + (c + b*t)*t;
                    res = length(qos);
                }else{
                    float z = sqrt(-p);
                    float v = acos( q/(p*z*2.0) ) / 3.0;
                    float m = cos(v);
                    float n = sin(v)*1.732050808;
                    vec3 t = vec3(m + m, -n - m, n - m) * z - kx;
                    t = clamp( t, 0.0, 1.0 );

                    // 3 roots
                    vec2 qos = d + (c + b*t.x)*t.x;
                    float dis = dot(qos,qos);
                    res = dis;
                    qos = d + (c + b*t.y)*t.y;
                    dis = dot(qos,qos);
                    res = min(res,dis);
                    qos = d + (c + b*t.z)*t.z;
                    dis = dot(qos,qos);
                    res = min(res,dis);
                    res = sqrt( res );
                }
                
                return res;
            }


            //http://mathworld.wolfram.com/HeartCurve.html
            vec2 getHeartPosition(float t){
                return vec2(16.0 * sin(t) * sin(t) * sin(t),
                                        -(13.0 * cos(t) - 5.0 * cos(2.0*t)
                                        - 2.0 * cos(3.0*t) - cos(4.0*t)));
            }

            //https://www.shadertoy.com/view/3s3GDn
            float getGlow(float dist, float radius, float intensity){
                return pow(radius/dist, intensity);
            }

            float getSegment(float t, vec2 pos, float offset, float scale){
                for(int i = 0; i < POINT_COUNT; i++){
                    points[i] = getHeartPosition(offset + float(i)*len + fract(speed * t) * 6.28);
                }
    
                vec2 c = (points[0] + points[1]) / 2.0;
                vec2 c_prev;
                float dist = 10000.0;
    
                for(int i = 0; i < POINT_COUNT-1; i++){
                    //https://tinyurl.com/y2htbwkm
                    c_prev = c;
                    c = (points[i] + points[i+1]) / 2.0;
                    dist = min(dist, sdBezier(pos, scale * c_prev, scale * points[i], scale * c));
                }
                return max(0.0, dist);
            }

            void main(){
                vec2 uv = gl_FragCoord.xy/resolution.xy;
                float widthHeightRatio = resolution.x/resolution.y;
                vec2 centre = vec2(0.5, 0.5);
                vec2 pos = centre - uv;
                pos.y /= widthHeightRatio;
                //Shift upwards to centre heart
                pos.y += 0.02;
                float scale = 0.000015 * height;
                
                float t = time;
    
                //Get first segment
                float dist = getSegment(t, pos, 0.0, scale);
                float glow = getGlow(dist, radius, intensity);
  
                vec3 col = vec3(0.0);

                //White core
                col += 10.0*vec3(smoothstep(0.003, 0.001, dist));
                //Pink glow
                col += glow * vec3(1.0,0.05,0.3);

                //Get second segment
                dist = getSegment(t, pos, 3.4, scale);
                glow = getGlow(dist, radius, intensity);

                //White core
                col += 10.0*vec3(smoothstep(0.003, 0.001, dist));
                //Blue glow
                col += glow * vec3(0.1,0.4,1.0);
                    
                //Tone mapping
                col = 1.0 - exp(-col);

                //Gamma
                col = pow(col, vec3(0.4545));

                //Output to screen
                gl_FragColor = vec4(col,1.0);
            }
        `;

        window.addEventListener('resize', onWindowResize, false);

        function onWindowResize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            gl.viewport(0, 0, canvas.width, canvas.height);
            gl.uniform1f(widthHandle, window.innerWidth);
            gl.uniform1f(heightHandle, window.innerHeight);
        }

        function compileShader(shaderSource, shaderType) {
            var shader = gl.createShader(shaderType);
            gl.shaderSource(shader, shaderSource);
            gl.compileShader(shader);
            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                throw "Shader compile failed with: " + gl.getShaderInfoLog(shader);
            }
            return shader;
        }

        function getAttribLocation(program, name) {
            var attributeLocation = gl.getAttribLocation(program, name);
            if (attributeLocation === -1) {
                throw 'Cannot find attribute ' + name + '.';
            }
            return attributeLocation;
        }

        function getUniformLocation(program, name) {
            var attributeLocation = gl.getUniformLocation(program, name);
            if (attributeLocation === -1) {
                throw 'Cannot find uniform ' + name + '.';
            }
            return attributeLocation;
        }

        var vertexShader = compileShader(vertexSource, gl.VERTEX_SHADER);
        var fragmentShader = compileShader(fragmentSource, gl.FRAGMENT_SHADER);
        var program = gl.createProgram();
        gl.attachShader(program, vertexShader);
        gl.attachShader(program, fragmentShader);
        gl.linkProgram(program);
        gl.useProgram(program);

        var vertexData = new Float32Array([
            -1.0, 1.0, // top left
            -1.0, -1.0, // bottom left
            1.0, 1.0, // top right
            1.0, -1.0, // bottom right
        ]);

        var vertexDataBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, vertexDataBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, vertexData, gl.STATIC_DRAW);

        var positionHandle = getAttribLocation(program, 'position');

        gl.enableVertexAttribArray(positionHandle);
        gl.vertexAttribPointer(positionHandle,
            2,
            gl.FLOAT,
            false,
            2 * 4,
            0
        );

        var timeHandle = getUniformLocation(program, 'time');
        var widthHandle = getUniformLocation(program, 'width');
        var heightHandle = getUniformLocation(program, 'height');

        gl.uniform1f(widthHandle, window.innerWidth);
        gl.uniform1f(heightHandle, window.innerHeight);

        var lastFrame = Date.now();
        var thisFrame;

        function draw() {
            thisFrame = Date.now();
            time += (thisFrame - lastFrame) / 1000;
            lastFrame = thisFrame;

            gl.uniform1f(timeHandle, time);
            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);

            requestAnimationFrame(draw);
        }

        draw();
    </script>














</body>

</html>